<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>neurocaps.extraction.TimeseriesExtractor &mdash; neurocaps 0.9.8 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2c5bc8c0" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=1a282f62"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="neurocaps.analysis.CAP" href="neurocaps.analysis.CAP.html" />
    <link rel="prev" title="API" href="../api.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            neurocaps
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#module-neurocaps.extraction"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neurocaps.extraction</span></code> - Timeseries Extraction, Pickling, &amp; Visualization</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neurocaps.extraction</span></code>.TimeseriesExtractor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#neurocaps.extraction.TimeseriesExtractor"><code class="docutils literal notranslate"><span class="pre">TimeseriesExtractor</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#module-neurocaps.analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neurocaps.analysis</span></code> - Co-Activation Patterns (CAPs) Analysis</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">neurocaps</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">API</a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neurocaps.extraction</span></code>.TimeseriesExtractor</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/neurocaps.extraction.TimeseriesExtractor.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="neurocaps-extraction-timeseriesextractor">
<h1><a class="reference internal" href="../api.html#module-neurocaps.extraction" title="neurocaps.extraction"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neurocaps.extraction</span></code></a>.TimeseriesExtractor<a class="headerlink" href="#neurocaps-extraction-timeseriesextractor" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="neurocaps.extraction.TimeseriesExtractor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">neurocaps.extraction.</span></span><span class="sig-name descname"><span class="pre">TimeseriesExtractor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">space</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'MNI152NLin2009cAsym'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standardize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'zscore_sample'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_pass</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_pass</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parcel_approach</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{'Schaefer':</span> <span class="pre">{'n_rois':</span> <span class="pre">400,</span> <span class="pre">'resolution_mm':</span> <span class="pre">1,</span> <span class="pre">'yeo_networks':</span> <span class="pre">7}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_confounds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confound_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fwhm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fd_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_acompcor_separate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dummy_scans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/neurocaps/extraction/timeseriesextractor.html#TimeseriesExtractor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neurocaps.extraction.TimeseriesExtractor" title="Link to this definition"></a></dt>
<dd><p>Timeseries Extractor Class</p>
<p>Initializes the TimeseriesExtractor class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>space</strong> (<em>str</em><em>, </em><em>default=&quot;MNI152NLin2009cAsym&quot;</em>) – The standard template space that the preprocessed bold data is registered to.</p></li>
<li><p><strong>standardize</strong> (<em>bool</em><em> or </em><em>str</em><em>, </em><em>default=&quot;zscore_sample&quot;</em>) – Determines whether to standardize the timeseries. Refer to Nilearn’s NiftiLabelsMasker for available options.</p></li>
<li><p><strong>detrend</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Detrends the timeseries during extraction.</p></li>
<li><p><strong>low_pass</strong> (<em>float</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Filters out signals above the specified cutoff frequency.</p></li>
<li><p><strong>high_pass</strong> (<em>float</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Filters out signals below the specified cutoff frequency.</p></li>
<li><p><strong>parcel_approach</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>]</em><em>, </em><em>default={&quot;Schaefer&quot;: {&quot;n_rois&quot;: 400</em><em>, </em><em>&quot;yeo_networks&quot;: 7</em><em>, </em><em>&quot;resolution_mm&quot;: 1}}</em>) – <p>The approach to parcellate BOLD images. This should be a nested dictionary with the first key being the atlas name. Currently, only “Schaefer”, “AAL”, and “Custom” are supported.</p>
<ul>
<li><p>For “Schaefer”, available options include n_rois, yeo_networks, and resolution_mm. Refer to Nilearn’s datasets.fetch_atlas_schaefer_2018 for valid inputs.</p></li>
<li><p>For “AAL”, the only option is version. Refer to Nilearn’s datasets.fetch_atlas_aal for valid inputs.</p></li>
<li><p>For “Custom”, the key must include a subkey called maps specifying the directory location of the parcellation Nifti file (e.g., {“Custom”: {“maps”: “/location/to/parcellation.nii.gz”}}).</p></li>
</ul>
</p></li>
<li><p><strong>use_confounds</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Determines whether to use confounds when extracting timeseries.</p></li>
<li><p><strong>confound_names</strong> (<em>List</em><em>[</em><em>str</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – Specifies the names of confounds to use from confound files. If None, default confounds are used. Note, an asterisk (“*”) can be used to find confound names that start with the term preceding the asterisk.
For instance, “cosine*” will find all confound names in the confound files starting with “cosine”.</p></li>
<li><p><strong>fwhm</strong> (<em>float</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Applies spatial smoothing to data (in millimeters). Note that using parcellations already averages voxels within parcel boundaries, which can improve signal-to-noise ratio (SNR) assuming Gaussian noise distribution.
However, smoothing may also blur parcel boundaries.</p></li>
<li><p><strong>fd_threshold</strong> (<em>float</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Sets a threshold to remove frames after nuisance regression and timeseries extraction. This requires a column named framewise_displacement in the confounds dataframe and use_confounds set to True.
Additionally, <cite>framewise_displacement</cite> should not need be specified in confound_names if using this parameter.</p></li>
<li><p><strong>n_acompcor_separate</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Specifies the number of separate acompcor components derived from white-matter (WM) and cerebrospinal fluid (CSF) masks to use. For example, if set to 5, the first five components from the WM mask
and the first five from the CSF mask will be used, totaling ten acompcor components. If this parameter is not None, any acompcor components listed in confound_names will be disregarded. To use acompcor
components derived from combined masks (WM &amp; CSF), leave this parameter as None and list the specific acompcors of interest in confound_names.</p></li>
<li><p><strong>dummy_scans</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Removes the first n volumes before extracting the timeseries.</p></li>
</ul>
</dd>
</dl>
<section id="notes-for-confounds-names">
<h2>Notes for <code class="docutils literal notranslate"><span class="pre">confounds_names</span></code><a class="headerlink" href="#notes-for-confounds-names" title="Link to this heading"></a></h2>
<p>Additionally, default <cite>confound_names</cite> changes if <cite>high_pass</cite> is not None.</p>
<p>If <cite>high_pass</cite> is not None, then the cosine parameters and acompcor parameters are not used because the cosine parameters are high-pass filters
and the acompcor regressors are estimated on the high-pass filtered version of the data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">confound_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;trans_x&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_x_derivative1&quot;</span><span class="p">,</span><span class="s2">&quot;trans_y&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_y_derivative1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;trans_z&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_z_derivative1&quot;</span><span class="p">,</span>  <span class="s2">&quot;rot_x&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_x_derivative1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;rot_y&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_y_derivative1&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_z&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_z_derivative1&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>If <cite>high_pass</cite> is None, then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">confound_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;trans_x&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_x_derivative1&quot;</span><span class="p">,</span><span class="s2">&quot;trans_y&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_y_derivative1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;trans_z&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_z_derivative1&quot;</span><span class="p">,</span>  <span class="s2">&quot;rot_x&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_x_derivative1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;rot_y&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_y_derivative1&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_z&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_z_derivative1&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>else:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">confound_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cosine*&quot;</span><span class="p">,</span><span class="s2">&quot;trans_x&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_x_derivative1&quot;</span><span class="p">,</span><span class="s2">&quot;trans_y&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_y_derivative1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;trans_z&quot;</span><span class="p">,</span> <span class="s2">&quot;trans_z_derivative1&quot;</span><span class="p">,</span>  <span class="s2">&quot;rot_x&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_x_derivative1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;rot_y&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_y_derivative1&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_z&quot;</span><span class="p">,</span> <span class="s2">&quot;rot_z_derivative1&quot;</span><span class="p">,</span> <span class="s2">&quot;a_comp_cor_00&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;a_comp_cor_01&quot;</span><span class="p">,</span> <span class="s2">&quot;a_comp_cor_02&quot;</span><span class="p">,</span> <span class="s2">&quot;a_comp_cor_03&quot;</span><span class="p">,</span> <span class="s2">&quot;a_comp_cor_04&quot;</span><span class="p">,</span> <span class="s2">&quot;a_comp_cor_05&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="notes-for-parcel-approach">
<h2>Notes for <code class="docutils literal notranslate"><span class="pre">parcel_approach</span></code><a class="headerlink" href="#notes-for-parcel-approach" title="Link to this heading"></a></h2>
<p>If using a “Custom” parcellation approach, ensure each node in your dataset includes both left (lh) and right (rh) hemisphere versions. This function assumes that the background label is “zero”.
Do not add a background label in the “nodes” or “networks” key; the zero index should correspond to the first ID that is not zero.</p>
</section>
<section id="custom-key-structure">
<h2>Custom Key Structure:<a class="headerlink" href="#custom-key-structure" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>‘maps’: Directory path containing necessary parcellation files. Ensure files are in a supported format (e.g., .nii for NIfTI files). For plotting purposes, this key is not required.</p></li>
<li><p>‘nodes’: List of all node labels used in your study, arranged in the exact order they correspond to indices in your parcellation files.
Each label should match the parcellation index it represents. For example, if the parcellation label “1” corresponds to the left hemisphere
visual cortex area 1, then “LH_Vis1” should occupy the 0th index in this list. This ensures that data extraction and analysis accurately reflect the anatomical regions intended.
For timeseries extraction, this key is not required.</p></li>
<li><p>‘regions’: Dictionary defining major brain regions. Each region should list node indices under “lh” and “rh” to specify left and right hemisphere nodes. For timeseries extraction, this key is not required.</p></li>
</ul>
<p class="rubric">Example</p>
<p>The provided example demonstrates setting up a custom parcellation containing nodes for the visual network (Vis) and hippocampus regions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parcel_approach</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Custom&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;maps&quot;</span><span class="p">:</span> <span class="s2">&quot;/location/to/parcellation.nii.gz&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;LH_Vis1&quot;</span><span class="p">,</span> <span class="s2">&quot;LH_Vis2&quot;</span><span class="p">,</span> <span class="s2">&quot;LH_Hippocampus&quot;</span><span class="p">,</span> <span class="s2">&quot;RH_Vis1&quot;</span><span class="p">,</span> <span class="s2">&quot;RH_Vis2&quot;</span><span class="p">,</span> <span class="s2">&quot;RH_Hippocampus&quot;</span><span class="p">],</span>
                     <span class="s2">&quot;regions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Vis&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;lh&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
                                          <span class="s2">&quot;rh&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]},</span>
                                 <span class="s2">&quot;Hippocampus&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;lh&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                                 <span class="s2">&quot;rh&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">]}}}}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="neurocaps.extraction.TimeseriesExtractor.get_bold">
<span class="sig-name descname"><span class="pre">get_bold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bids_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_subjects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_subjects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipeline_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_print</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_niftis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/neurocaps/extraction/timeseriesextractor.html#TimeseriesExtractor.get_bold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neurocaps.extraction.TimeseriesExtractor.get_bold" title="Link to this definition"></a></dt>
<dd><p>Get Bold Data</p>
<p>Collects files needed to extract timeseries data from NIfTI files for BIDS-compliant datasets containing a derivatives folder. This function assumes that your BOLD data was preprocessed using a standard
preprocessing pipeline such as fMRIPrep.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bids_dir</strong> (<em>Path</em>) – Path to a BIDS compliant directory.</p></li>
<li><p><strong>task</strong> (<em>str</em>) – Name of task to process.</p></li>
<li><p><strong>session</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Session to extract timeseries from. Only a single session can be extracted at a time.</p></li>
<li><p><strong>runs</strong> (<em>List</em><em>[</em><em>int</em><em>]</em><em>, </em><em>default=None</em>) – <p>List of run numbers to extract timeseries data from. Extracts all runs if unspecified. For instance, if only “run-0” and “run-1” should be extracted, then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runs</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</p></li>
<li><p><strong>condition</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Specific condition in the task to extract from. Only a single condition can be extracted at a time.</p></li>
<li><p><strong>tr</strong> (<em>int</em><em> or </em><em>float</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Repetition time for task.</p></li>
<li><p><strong>run_subjects</strong> (<em>List</em><em>[</em><em>str</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – List of subject IDs to process. Processes all subjects if None.</p></li>
<li><p><strong>exclude_subjects</strong> (<em>List</em><em>[</em><em>str</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – List of subject IDs to exclude.</p></li>
<li><p><strong>pipeline_name</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – The name of the pipeline folder in the derivatives folder containing the preprocessed data. If None, BIDSLayout will use the name of dset_dir with derivatives=True. This parameter
should be used if there are multiple pipelines in the derivatives folder.</p></li>
<li><p><strong>n_cores</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – The number of CPU cores to use for multiprocessing with joblib.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Print subject-specific information such as confounds being extracted, and id and run of subject being processed during timeseries extraction.</p></li>
<li><p><strong>flush_print</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Flush the printed subject-specific infomation produced during the timeseries extraction process.</p></li>
<li><p><strong>exclude_niftis</strong> (<em>List</em><em>[</em><em>str</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – List of specific preprocessed NIfTI files to exclude, preventing their timeseries from being extracted. Used if there are specific runs across differnt participants that need to be
excluded.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function stores the extracted timeseries as a nested dictionary and stores it in <code class="docutils literal notranslate"><span class="pre">self.subject_timeseres</span></code>. The first level of the nested dictionary consists of the subject ID as a string,
the second level consists of the run numbers in the form of ‘run-#’ (where # is the corresponding number of the run), and the last level must consist of the timeseries
(as a numpy array) associated with that run.</p>
<p>Additionally, if your files do not specify a run number due to your subjects only having a single run, the run id key for the second level of the nested dictionary defaults to “run-0”.</p>
<p><strong>This function cannot be used on Windows PCs.</strong></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neurocaps.extraction.TimeseriesExtractor.timeseries_to_pickle">
<span class="sig-name descname"><span class="pre">timeseries_to_pickle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/neurocaps/extraction/timeseriesextractor.html#TimeseriesExtractor.timeseries_to_pickle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neurocaps.extraction.TimeseriesExtractor.timeseries_to_pickle" title="Link to this definition"></a></dt>
<dd><p>Save Bold Data</p>
<p>Saves the timeseries dictionary obtained from running <code class="docutils literal notranslate"><span class="pre">get_bold()</span></code> as a pickle file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_dir</strong> (<em>Path</em>) – Directory to save to. The directory will be created if it does not exist.</p></li>
<li><p><strong>file_name</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Name of the file with or without the “pkl” extension.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neurocaps.extraction.TimeseriesExtractor.visualize_bold">
<span class="sig-name descname"><span class="pre">visualize_bold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subj_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_indx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_figs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/neurocaps/extraction/timeseriesextractor.html#TimeseriesExtractor.visualize_bold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neurocaps.extraction.TimeseriesExtractor.visualize_bold" title="Link to this definition"></a></dt>
<dd><p>Plot Bold Data</p>
<p>Collects files needed to extract timeseries data from NIfTI files for BIDS-compliant datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subj_id</strong> (<em>str pr int</em>) – The subject ID.</p></li>
<li><p><strong>run</strong> (<em>int</em>) – The run to plot.</p></li>
<li><p><strong>roi_indx</strong> (<em>int</em><em> or </em><em>List</em><em>[</em><em>int</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – The indices of the parcellation nodes to plot. See self.node_indices for valid node names and indices.</p></li>
<li><p><strong>region</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – The region of the parcellation to plot. If not None, all nodes in the specified region will be averaged then plotted. See “regions” in <code class="docutils literal notranslate"><span class="pre">self.parcel_approach</span></code>.
for valid regions names.</p></li>
<li><p><strong>show_figs</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Whether to show the figures.</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Directory to save to. The directory will be created if it does not exist.</p></li>
<li><p><strong>file_name</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Name of the file without the extension.</p></li>
<li><p><strong>**kwargs</strong> (<em>Dict</em>) – <p>Keyword arguments used when saving figures. Valid keywords include:</p>
<ul>
<li><dl class="simple">
<dt>”dpi”: int, default=300</dt><dd><p>Dots per inch for the figure. Default is 300 if <code class="docutils literal notranslate"><span class="pre">output_dir</span></code> is provided and <code class="docutils literal notranslate"><span class="pre">dpi</span></code> is not specified.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”figsize”: tuple, default=(11, 5)</dt><dd><p>Size of the figure in inches. Default is (11, 5) if <code class="docutils literal notranslate"><span class="pre">figsize</span></code> is not specified.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>matplotlib.Figure</em> – An instance of a matplotlib figure.</p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

<div style='clear:both'></div></section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../api.html" class="btn btn-neutral float-left" title="API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="neurocaps.analysis.CAP.html" class="btn btn-neutral float-right" title="neurocaps.analysis.CAP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Donisha Smith.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>